===========================
                    ORA QUADRA NANO v1.4 I2C1
                 RIASSUNTO COMPLETO CARATTERISTICHE
===========================

===========================
1. HARDWARE SUPPORTATO
===========================

Componente          | Modello              | Funzione
--------------------|----------------------|----------------------------------
Display             | TFT 480x480px        | Touchscreen capacitivo GT911
CPU Principale      | ESP32-S3             | Master I2C
CPU Audio           | ESP32-C3             | Slave I2C @ 0x08 (opzionale)
Radar               | LD2410               | Presenza + luminosita ambiente
Sensore Ambiente    | BME280               | Temperatura, umidita, pressione
Magnetometro        | QMC5883P             | Bussola per Weather Station
LED Esterni         | NeoPixel 60 LED      | Anello orologio esterno
SD Card             | Opzionale            | Skin orologio analogico

Pin I2C: SDA=19, SCL=45
Pin UART Radar: RX=IO2, TX=IO1

===========================
2. MODALITA DI VISUALIZZAZIONE (20+)
===========================

WORDCLOCK BASE:
- MODE_FAST      - Aggiornamento fluido ogni minuto
- MODE_SLOW      - Dissolvenza dolce lettere
- MODE_FADE      - Dissolvenza graduale tra ore/minuti
- MODE_MATRIX    - Effetto Matrix cascade
- MODE_MATRIX2   - Matrix continuo senza reset
- MODE_SNAKE     - Serpente che mangia le lettere
- MODE_WATER     - Effetto goccia d'acqua ondulante
- MODE_MARIO     - Personaggio Mario 8-bit che salta
- MODE_TRON      - Griglia neon stile TRON

MODALITA SPECIALI:
- MODE_ANALOG_CLOCK    - Orologio analogico con lancette + skin JPEG da SD
- MODE_FLIP_CLOCK      - Orologio a palette stile stazione ferroviaria
- MODE_BTTF            - Ritorno al Futuro (3 pannelli: Destination/Present/Departed)
- MODE_LED_RING        - Anello LED esterno NeoPixel 60 LED
- MODE_WEATHER_STATION - Stazione meteo completa con icone
- MODE_FLUX_CAPACITOR  - Animazione Flux Capacitor BTTF
- MODE_CHRISTMAS       - Tema natalizio con neve/decorazioni
- MODE_FIRE            - Effetto fuoco camino animato
- MODE_FIRE_TEXT       - Lettere fiammeggianti
- MODE_GALAGA          - Gioco arcade Galaga
- MODE_MJPEG_STREAM    - Streaming video MJPEG
- MODE_ESP32CAM        - Streaming da ESP32-CAM remoto

COME CAMBIARE MODALITA:
- Tocco quadrante alto-sinistra: cicla modalita successiva
- Pagina web /settings: selezione diretta
- Menu Setup: imposta modalita predefinita

===========================
3. FUNZIONALITA AUDIO
===========================

Funzione                | Descrizione                          | File
------------------------|--------------------------------------|------------------
Annuncio ora automatico | Ogni ora (orari configurabili)       | 5_AUDIO.ino
Annuncio ora manuale    | Tocco centro schermo                 | 1_TOUCH.ino
Annuncio boot           | Data e ora all'accensione            | 7_AUDIO_WIFI.ino
Beep touch              | Feedback sonoro al tocco             | 1_TOUCH.ino
Clack flip              | Suono orologio a palette             | 10_FLIP_CLOCK.ino
Volume giorno/notte     | Separati e configurabili             | 26_WEBSERVER_SETTINGS.ino

AUDIO I2S LOCALE (#ifdef AUDIO):
- Pin I2S: BCLK (39), LRC (40), DOUT (1)
- Amplificatore: MAX98357A, Enable pin 9
- File SPIFFS: beep.mp3, clack.mp3, numeri 0-59.mp3, sonole.mp3, e.mp3, minuti.mp3

AUDIO WIFI ESP32C3 (#ifndef AUDIO):
- Comunicazione I2C verso slave 0x08
- Comandi: CMD_ANNOUNCE_TIME, CMD_PLAY_BEEP, CMD_SET_VOLUME

===========================
4. INTERFACCIA WEB (porta 8080)
===========================

Pagina      | URL              | Funzione
------------|------------------|------------------------------------------
Home        | /                | Display orologio real-time, info dispositivo
Settings    | /settings        | Configurazione completa (colori, audio, API)
BTTF        | /bttf            | Editor date BTTF (3 pannelli)
LED Ring    | /ledring         | Configurazione LED esterni NeoPixel
Clock       | /clock           | Configurazione orologio analogico
MJPEG       | /mjpeg           | Viewer streaming video MJPEG
ESP32-CAM   | /esp32cam        | Viewer streaming camera remota

API PRINCIPALI:
- /api/time/get          - Ottieni ora attuale (JSON)
- /api/mode/set          - Cambia modalita
- /api/color/set         - Imposta colore RGB
- /api/preset/set        - Applica preset
- /api/brightness/set    - Luminosita display
- /api/volume/set        - Volume audio
- /settings/save         - Salva tutte le impostazioni

===========================
5. SMART HOME - AMAZON ALEXA
===========================

Device Name: ORAQUADRANANO
Device Type: Extended Color Light
Libreria: Espalexa v2.8+

COMANDI VOCALI:
- "Alexa, accendi [Device]"              -> Display ON
- "Alexa, spegni [Device]"               -> Display OFF
- "Alexa, setta [Device] colore rosso"   -> Cambio colore RGB
- "Alexa, luminosita [Device] 50%"       -> Regola luminosita
- "Alexa, aumenta luminosita [Device]"   -> +10% luminosita

===========================
6. SENSORI E RILEVAMENTO
===========================

RADAR LD2410:
- Rilevamento presenza fino a 4.5 metri
- Distanza precisa del target
- Sensore luminosita ambiente integrato
- Controllo automatico luminosita display:
  * Buio (<50): luminosita 90
  * Poco luce (<100): luminosita 120
  * Media luce (<150): luminosita 180
  * Molta luce (>=150): luminosita 250

BME280:
- Temperatura interna
- Umidita interna
- Pressione atmosferica (per previsioni trend)

QMC5883P MAGNETOMETRO:
- Bussola 360 gradi
- Direzione vento in Weather Station
- Calibrazione guidata on-screen

GT911 TOUCHSCREEN:
- Risoluzione 480x480px
- Multi-touch capacitivo
- Antirimbalzo 50ms

===========================
7. CONTROLLI TOUCH
===========================

Layout schermo:
+----------------------------+
|  MODALITA   |    PRESET    |
|    +/-      |     +/-      |
|-------------|--------------|
|   CICLA     |  LETTERA E   |
|   COLORI    |   ON/OFF     |
+----------------------------+
      CENTRO = ANNUNCIA ORA

AZIONI SPECIALI:
- 4 angoli per 5 secondi    -> Reset WiFi (countdown giallo)
- Scroll dall'alto in basso -> Apri Menu Setup
- Angolo basso-destra       -> Mostra QR Code pagina settings
- Long press centro (BTTF)  -> Apri setup sveglie BTTF

===========================
8. PRESET COLORI (14)
===========================

ID | Nome               | Modalita  | Colore RGB
---|--------------------|-----------|--------------
0  | Random             | Random    | Casuale
1  | Veloce Acqua       | FAST      | (0,255,255)
2  | Lento Viola        | SLOW      | (255,0,255)
3  | Lento Arancione    | SLOW      | (255,165,0)
4  | Fade Rosso         | FADE      | (255,0,0)
5  | Fade Verde         | FADE      | (0,255,0)
6  | Fade Blu           | FADE      | (0,0,255)
7  | Matrix Giallo      | MATRIX    | (255,255,0)
8  | Matrix Ciano       | MATRIX    | (0,255,255)
9  | Matrix 2 Verde     | MATRIX2   | (0,255,0)
10 | Matrix 2 Bianco    | MATRIX2   | (255,255,255)
11 | Snake              | SNAKE     | (255,255,0)
12 | Goccia Acqua       | WATER     | (0,150,255)
13 | Come Piace a Me    | USER      | Personalizzato

CICLAGGIO COLORI MANUALE:
- Tocco quadrante basso-sinistra (solo WordClock)
- Cicla colori HSV (Hue 0-360 gradi)
- Rilascio = salva colore come preset 13

===========================
9. CONFIGURAZIONE SALVATA (EEPROM)
===========================

Indirizzo | Variabile              | Default
----------|------------------------|------------------
0         | CONFIG_MARKER          | 0xAA
1         | PRESET                 | 0
2         | MODE                   | MODE_FAST
3         | WORD_E_STATE           | 1 (ON)
4-6       | COLOR (R,G,B)          | 255,255,255
7         | CLOCK_DATE             | 1 (visibile)
8         | DAY_START_HOUR         | 8
9         | NIGHT_START_HOUR       | 22
10-11     | BRIGHTNESS (Day/Night) | 250/90
12        | HOURLY_ANNOUNCE        | 1 (ON)
13        | AUDIO_VOLUME           | 80%
14-15     | VOLUME (Day/Night)     | 80/30
+4        | AUTO_NIGHT_MODE        | ON
+5        | TOUCH_SOUNDS           | ON
+6        | POWER_SAVE             | OFF
+176      | RADAR_BRIGHTNESS       | ON

===========================
10. MENU SETUP (Opzioni)
===========================

Opzione            | Default | Effetto
-------------------|---------|----------------------------------------
Auto Night Mode    | ON      | Disabilita audio durante la notte
Touch Sounds       | ON      | Beep feedback al tocco
Power Save         | OFF     | Riduce potenza in inattivita
Radar Brightness   | ON      | Luminosita automatica da sensore radar
Display Mode       | FAST    | Modalita predefinita all'avvio

ACCESSO: Scroll dal bordo superiore verso il basso

===========================
11. FILE PRINCIPALI (.ino)
===========================

File                        | Contenuto
----------------------------|------------------------------------------
0_SETUP.ino                 | Inizializzazione hardware (WiFi, I2C, radar, BME280)
1_TOUCH.ino                 | Gestione touchscreen e input utente
2_CHANGE_MODE.ino           | Switch tra modalita e applicazione preset
3_EFFETTI.ino               | Tutti gli effetti speciali WordClock
4_MENU.ino                  | Menu setup configurazione
4_WEBSERVER_CLOCK.ino       | Web server pagina orologio analogico
5_AUDIO.ino                 | Audio I2S locale, TTS, annunci
5_WEBSERVER_LED_RING.ino    | Web server configurazione LED ring
7_AUDIO_WIFI.ino            | Comunicazione I2C audio ESP32C3
8_CLOCK.ino                 | Logica orologio digitale e analogico
10_FLIP_CLOCK.ino           | Orologio flip animato
11_FLIP_CLOCK_UTILS.ino     | Utility per flip clock
12_BTTF.ino                 | Modalita Back to the Future
13_WEBSERVER_BTTF.ino       | Configurazione web BTTF
14_CAPODANNO.ino            | Tema capodanno (fuochi artificiali)
18_LED_RING_CLOCK.ino       | Controllo LED ring esterno
19_WEATHER.ino              | Download meteo OpenWeatherMap
20_WEATHER_STATION.ino      | Visualizzazione stazione meteo
21_MJPEG_STREAM.ino         | Server streaming video MJPEG
22_WEBSERVER_MJPEG.ino      | Web viewer MJPEG
23_ESP32CAM_STREAM.ino      | Streaming da camera ESP32-CAM
24_WEBSERVER_ESP32CAM.ino   | Web viewer ESP32-CAM
25_MAGNETOMETER.ino         | Driver magnetometro QMC5883P
26_WEBSERVER_SETTINGS.ino   | Pagina impostazioni principale
27_FLUX_CAPACITOR.ino       | Effetto Flux Capacitor animato
28_CHRISTMAS.ino            | Tema natalizio
29_FIRE.ino                 | Effetto fuoco camino
30_FIRE_TEXT.ino            | Lettere fiammeggianti

ESP32C3_AudioSlave_I2C/
  ESP32C3_AudioSlave_I2C.ino | Firmware audio slave I2C

===========================
12. COMUNICAZIONE
===========================

WIFI:
- Configurazione via WiFiManager + QR Code
- Portale captive: http://192.168.4.1
- AP fallback: "OraQuadra_[MAC]"
- mDNS: oraquadra.local
- OTA updates supportati (porta 3232)

I2C BUS (SDA=19, SCL=45):
- 0x5D/0x14 -> GT911 Touchscreen
- 0x08      -> ESP32-C3 Audio Slave
- 0x76/0x77 -> BME280 Sensore ambientale
- 0x0C/0x2C -> QMC5883P Magnetometro

UART (Radar LD2410):
- Baudrate: 115200
- RX Pin: IO2, TX Pin: IO1

COMANDI I2C AUDIO (0x08):
- 0x01 CMD_ANNOUNCE_TIME [hour, minute]
- 0x03 CMD_SET_VOLUME [volume 0-100]
- 0x04 CMD_STOP_AUDIO
- 0x06 CMD_PING -> risposta 0xFF
- 0x08 CMD_BOOT_ANNOUNCE [dayOfWeek, day, month, hour, minute, year]
- 0x09 CMD_PLAY_BEEP
- 0x0A CMD_PLAY_CLACK

===========================
13. AUTOMAZIONI
===========================

BASATE SU TEMPO:
- Annuncio ora automatico (programmabile 8:00-20:00)
- Cambio luminosita giorno/notte
- Volume audio giorno/notte separato

BASATE SU SENSORI:
- Accensione/spegnimento display con movimento (LD2410)
- Regolazione luminosita automatica con sensore luce
- Timeout inattivita: spegni display senza movimento

===========================
14. PRIMA ACCENSIONE
===========================

1. Accendi dispositivo
2. Aspetta 10 secondi (setup WiFi)
3. Scansiona QR Code "OraQuadra_[MAC]"
4. Inserisci credenziali WiFi nel portale
5. Dispositivo si connette e mostra orologio
6. Accedi a http://[IP]:8080/settings per configurare

===========================
15. NOTE IMPORTANTI
===========================

- AUDIO: Richiede ESP32C3 slave O audio I2S locale con speaker
- METEO: Richiede API key OpenWeatherMap (gratuita)
- SD CARD: Opzionale, solo per skin orologio analogico
- RADAR: Opzionale, senza di esso luminosita solo manuale
- FUSO ORARIO: Configurare in 0_SETUP.ino (ezTime library)
- BACKUP: Salvare configurazione prima di aggiornamenti firmware

===========================
                         Fine documento
===========================
